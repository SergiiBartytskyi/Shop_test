{"mappings":"gfAAA,IAAAA,EAAAC,EAAA,S,uCAMA,IACiBC,EACFC,EAFTC,EAAOC,SAASC,cAAc,YAC9BC,EAAgE,QAArDL,EAAAM,KAAKC,MAAMC,aAAaC,QAAQX,EAAAY,OAAOC,sBAAc,IAArDX,IAAyD,GACpEY,EAA4D,QAAnDX,EAAAK,KAAKC,MAAMC,aAAaC,QAAQX,EAAAY,OAAOG,oBAAY,IAAnDZ,IAAuD,IAEtE,EAAAa,EAAAC,sBAAqBV,EAAUH,GAC/BA,EAAKc,iBAAiB,SAEtB,SAAiBC,GAGf,GAFAA,EAAEC,iBAEED,EAAEE,OAAOC,UAAUC,SAAS,WAAY,CAC1C,IAAMC,GAAU,EAAAC,EAAAC,aAAYP,EAAEE,SAC9B,EAAAM,EAAAC,aAAYJ,E,CAGd,GAAIL,EAAEE,OAAOC,UAAUC,SAAS,eAAgB,CAC9C,IAAMM,GAAU,EAAAJ,EAAAC,aAAYP,EAAEE,QAGxBS,EADUtB,KAAKC,MAAMC,aAAaC,QAAQX,EAAAY,OAAOC,eACzBkB,QAAO,SAAAC,G,OAAKA,EAAFC,KAAgBJ,EAAQI,E,IAChEvB,aAAawB,QAAQlC,EAAAY,OAAOC,aAAcL,KAAK2B,UAAUL,KACzD,EAAAd,EAAAC,sBAAqBa,EAAe1B,E,CAGtC,GAAIe,EAAEE,OAAOC,UAAUC,SAAS,aAAc,CAC5C,IAAMa,GAAU,EAAAX,EAAAC,aAAYP,EAAEE,QC/BRgB,EDiCFD,GCjCHE,EDiCLxB,GChCQyB,MAAK,SAAAP,G,OAAKA,EAAFC,KAAgBI,EAAGJ,E,KAIjDK,EAAIE,KAAKH,GD6BP3B,aAAawB,QAAQlC,EAAAY,OAAOG,WAAYP,KAAK2B,UAAUrB,G,CClC3D,IAAqBwB,EAAKD,C","sources":["src/js/favorite.js","src/helpers/isInStorage.js"],"sourcesContent":["import { common } from '../helpers/common';\nimport { createMarkupFavorite } from '../helpers/createMarkup';\nimport { createModal } from '../helpers/createModal';\nimport { findProduct } from '../helpers/findProduct';\nimport { isInStorage } from '../helpers/isInStorage';\n\nconst list = document.querySelector('.js-list');\nconst favorite = JSON.parse(localStorage.getItem(common.KEY_FAVORITE)) ?? [];\nconst basket = JSON.parse(localStorage.getItem(common.KEY_BASKET)) ?? [];\n\ncreateMarkupFavorite(favorite, list);\nlist.addEventListener('click', onClick);\n\nfunction onClick(e) {\n  e.preventDefault();\n\n  if (e.target.classList.contains('js-info')) {\n    const product = findProduct(e.target);\n    createModal(product);\n  }\n\n  if (e.target.classList.contains('js-favorite')) {\n    const product = findProduct(e.target);\n\n    const storage = JSON.parse(localStorage.getItem(common.KEY_FAVORITE));\n    const updateStorage = storage.filter(({ id }) => id !== product.id);\n    localStorage.setItem(common.KEY_FAVORITE, JSON.stringify(updateStorage));\n    createMarkupFavorite(updateStorage, list);\n  }\n\n  if (e.target.classList.contains('js-basket')) {\n    const product = findProduct(e.target);\n\n    isInStorage(basket, product);\n    localStorage.setItem(common.KEY_BASKET, JSON.stringify(basket));\n  }\n}\n","function isInStorage(arr, el) {\n  const inStorage = arr.some(({ id }) => id === el.id);\n  if (inStorage) {\n    return;\n  }\n  arr.push(el);\n}\n\nexport { isInStorage };\n"],"names":["$1n1Fu","parcelRequire","$8bf2312eefa07846$var$ref","$8bf2312eefa07846$var$ref1","$8bf2312eefa07846$var$list","document","querySelector","$8bf2312eefa07846$var$favorite","JSON","parse","localStorage","getItem","common","KEY_FAVORITE","$8bf2312eefa07846$var$basket","KEY_BASKET","$l1rGz","createMarkupFavorite","addEventListener","e","preventDefault","target","classList","contains","product","$aWUWK","findProduct","$87LyB","createModal","product1","updateStorage","filter","param","id","setItem","stringify","product2","el","arr","some","push"],"version":3,"file":"favorite.85e03801.js.map"}